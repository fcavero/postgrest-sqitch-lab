-- Deploy lab-postgrest-sqitch:tt_vehicle_industry_type to pg
-- requires: tt_vehicle_industry_construction_type
-- requires: tt_vehicle_industry_use_type
-- requires: appschema

DO $$
BEGIN
    BEGIN

        CREATE TABLE IF NOT EXISTS "public".tt_vehicle_industry_type ( 
	        id                 char(4) NOT NULL,
            id_construction    char(2) NOT NULL,
            id_use             char(2) NOT NULL,
	        CONSTRAINT pk_tt_vehicle_industry_type_id PRIMARY KEY ( id )
        );

        CREATE INDEX IF NOT EXISTS idx_tt_vehicle_industry_type_id_construction ON "public".tt_vehicle_industry_type ( id_construction );
        CREATE INDEX IF NOT EXISTS idx_tt_vehicle_industry_type_id_use ON "public".tt_vehicle_industry_type ( id_use );

        COMMENT ON TABLE "public".tt_vehicle_industry_type IS 'Master table of industry types of vehicles, according to the DGT data.';
        COMMENT ON COLUMN "public".tt_vehicle_industry_type.id IS 'Industry type id.';
        COMMENT ON COLUMN "public".tt_vehicle_industry_type.id_construction IS 'Construction industry type (first couple of digits).';
        COMMENT ON COLUMN "public".tt_vehicle_industry_type.id_use IS 'Use industry type (last couple of digits).';

        ALTER TABLE "public".tt_vehicle_industry_type ADD CONSTRAINT fk_tt_vehicle_industry_construction_type_id_construction FOREIGN KEY ( id_construction ) REFERENCES "public".tt_vehicle_industry_construction_type( id ) ON DELETE RESTRICT ON UPDATE CASCADE;
        ALTER TABLE "public".tt_vehicle_industry_type ADD CONSTRAINT fk_tt_vehicle_industry_use_type_id_use FOREIGN KEY ( id_use ) REFERENCES "public".tt_vehicle_industry_use_type( id ) ON DELETE RESTRICT ON UPDATE CASCADE;

        -- DGT data
        INSERT INTO "public".tt_vehicle_industry_type ( id, id_construction, id_use ) VALUES
         ('0300','03','00')
        ,('0400','04','00')
        ,('0401','04','01')
        ,('0402','04','02')
        ,('0404','04','04')
        ,('0405','04','05')
        ,('0407','04','07')
        ,('0410','04','10')
        ,('0411','04','11')
        ,('0440','04','40')
        ,('0441','04','41')
        ,('0500','05','00')
        ,('0517','05','17')
        ,('0520','05','20')
        ,('0600','06','00')
        ,('0601','06','01')
        ,('0611','06','11')
        ,('0617','06','17')
        ,('0641','06','41')
        ,('10','10','10')
        ,('100','10','00')
        ,('1000','10','00')
        ,('1001','10','01')
        ,('1002','10','02')
        ,('1003','10','03')
        ,('1004','10','04')
        ,('1005','10','05')
        ,('1006','10','06')
        ,('1007','10','07')
        ,('1010','10','10')
        ,('1011','10','11')
        ,('1016','10','16')
        ,('1022','10','22')
        ,('1027','10','27')
        ,('1031','10','31')
        ,('1033','10','33')
        ,('1040','10','40')
        ,('1041','10','41')
        ,('1042','10','42')
        ,('1043','10','43')
        ,('1044','10','44')
        ,('1045','10','45')
        ,('1046','10','46')
        ,('1047','10','47')
        ,('1048','10','48')
        ,('1049','10','49')
        ,('1050','10','50')
        ,('1052','10','52')
        ,('1092','10','92')
        ,('1100','11','00')
        ,('1149','11','49')
        ,('1200','12','00')
        ,('1201','12','01')
        ,('1202','12','02')
        ,('1203','12','03')
        ,('1204','12','04')
        ,('1205','12','05')
        ,('1206','12','06')
        ,('1207','12','07')
        ,('1208','12','08')
        ,('1240','12','40')
        ,('1241','12','41')
        ,('1244','12','44')
        ,('1248','12','48')
        ,('1252','12','52')
        ,('1304','13','04')
        ,('1306','13','06')
        ,('1307','13','07')
        ,('1600','16','00')
        ,('1604','16','04')
        ,('1606','16','06')
        ,('1607','16','07')
        ,('1649','16','49')
        ,('1700','17','00')
        ,('1733','17','33')
        ,('20','20','20')
        ,('2000','20','00')
        ,('2010','20','10')
        ,('2011','20','11')
        ,('2012','20','12')
        ,('2013','20','13')
        ,('2014','20','14')
        ,('2015','20','15')
        ,('2017','20','17')
        ,('2019','20','19')
        ,('2020','20','20')
        ,('2021','20','21')
        ,('2022','20','22')
        ,('2023','20','23')
        ,('2024','20','24')
        ,('2025','20','25')
        ,('2027','20','27')
        ,('2028','20','28')
        ,('2033','20','33')
        ,('2041','20','41')
        ,('2043','20','43')
        ,('2044','20','44')
        ,('2046','20','46')
        ,('2047','20','47')
        ,('2048','20','48')
        ,('2049','20','49')
        ,('2051','20','51')
        ,('2052','20','52')
        ,('2053','20','53')
        ,('2054','20','54')
        ,('2055','20','55')
        ,('2060','20','60')
        ,('2061','20','61')
        ,('21','21','21')
        ,('2100','21','00')
        ,('2102','21','02')
        ,('2105','21','05')
        ,('2110','21','10')
        ,('2111','21','11')
        ,('2112','21','12')
        ,('2113','21','13')
        ,('2114','21','14')
        ,('2115','21','15')
        ,('2117','21','17')
        ,('2120','21','20')
        ,('2121','21','21')
        ,('2122','21','22')
        ,('2123','21','23')
        ,('2124','21','24')
        ,('2125','21','25')
        ,('2126','21','26')
        ,('2127','21','27')
        ,('2141','21','41')
        ,('2143','21','43')
        ,('2144','21','44')
        ,('2146','21','46')
        ,('2147','21','47')
        ,('2148','21','48')
        ,('2149','21','49')
        ,('2151','21','51')
        ,('2152','21','52')
        ,('2153','21','53')
        ,('2154','21','54')
        ,('2155','21','55')
        ,('2158','21','58')
        ,('2160','21','60')
        ,('2161','21','61')
        ,('2162','21','62')
        ,('2165','21','65')
        ,('22','22','22')
        ,('2200','22','00')
        ,('2205','22','05')
        ,('2210','22','10')
        ,('2211','22','11')
        ,('2212','22','12')
        ,('2213','22','13')
        ,('2214','22','14')
        ,('2215','22','15')
        ,('2216','22','16')
        ,('2217','22','17')
        ,('2218','22','18')
        ,('2220','22','20')
        ,('2221','22','21')
        ,('2223','22','23')
        ,('2224','22','24')
        ,('2225','22','25')
        ,('2227','22','27')
        ,('2228','22','28')
        ,('2229','22','29')
        ,('2233','22','33')
        ,('2241','22','41')
        ,('2246','22','46')
        ,('2247','22','47')
        ,('2248','22','48')
        ,('2249','22','49')
        ,('2251','22','51')
        ,('2252','22','52')
        ,('2253','22','53')
        ,('2254','22','54')
        ,('2255','22','55')
        ,('2256','22','56')
        ,('2258','22','58')
        ,('2260','22','60')
        ,('2262','22','62')
        ,('2265','22','65')
        ,('2266','22','66')
        ,('2267','22','67')
        ,('2276','22','76')
        ,('2278','22','78')
        ,('23','23','23')
        ,('2300','23','00')
        ,('2305','23','05')
        ,('2311','23','11')
        ,('2317','23','17')
        ,('2341','23','41')
        ,('2349','23','49')
        ,('2353','23','53')
        ,('24','24','24')
        ,('2400','24','00')
        ,('2401','24','01')
        ,('2404','24','04')
        ,('2410','24','10')
        ,('2411','24','11')
        ,('2413','24','13')
        ,('2414','24','14')
        ,('2415','24','15')
        ,('2420','24','20')
        ,('2421','24','21')
        ,('2422','24','22')
        ,('2423','24','23')
        ,('2424','24','24')
        ,('2425','24','25')
        ,('2426','24','26')
        ,('2430','24','30')
        ,('2433','24','33')
        ,('2440','24','40')
        ,('2441','24','41')
        ,('2443','24','43')
        ,('2444','24','44')
        ,('2445','24','45')
        ,('2446','24','46')
        ,('2447','24','47')
        ,('2448','24','48')
        ,('2449','24','49')
        ,('2450','24','50')
        ,('2451','24','51')
        ,('2452','24','52')
        ,('2454','24','54')
        ,('2460','24','60')
        ,('2461','24','61')
        ,('2462','24','62')
        ,('2500','25','00')
        ,('2520','25','20')
        ,('2522','25','22')
        ,('2523','25','23')
        ,('2525','25','25')
        ,('2543','25','43')
        ,('2547','25','47')
        ,('2549','25','49')
        ,('2561','25','61')
        ,('2562','25','62')
        ,('2644','26','44')
        ,('2650','26','50')
        ,('2652','26','52')
        ,('2917','29','17')
        ,('3000','30','00')
        ,('3004','30','04')
        ,('3011','30','11')
        ,('3033','30','33')
        ,('3041','30','41')
        ,('3045','30','45')
        ,('3049','30','49')
        ,('31','31','31')
        ,('3100','31','00')
        ,('3101','31','01')
        ,('3102','31','02')
        ,('3105','31','05')
        ,('3110','31','10')
        ,('3111','31','11')
        ,('3120','31','20')
        ,('3121','31','21')
        ,('3123','31','23')
        ,('3125','31','25')
        ,('3133','31','33')
        ,('3140','31','40')
        ,('3141','31','41')
        ,('3142','31','42')
        ,('3143','31','43')
        ,('3144','31','44')
        ,('3145','31','45')
        ,('3146','31','46')
        ,('3148','31','48')
        ,('3149','31','49')
        ,('3152','31','52')
        ,('3158','31','58')
        ,('3161','31','61')
        ,('3200','32','00')
        ,('3241','32','41')
        ,('3247','32','47')
        ,('3248','32','48')
        ,('3300','33','00')
        ,('3304','33','04')
        ,('3307','33','07')
        ,('3348','33','48')
        ,('5000','50','00')
        ,('6600','66','00')
        ,('6641','66','41')
        ,('0073','00','73')
        ,('0301','03','01')
        ,('0302','03','02')
        ,('0305','03','05')
        ,('0311','03','11')
        ,('0320','03','20')
        ,('0341','03','41')
        ,('0450','04','50')
        ,('0511','05','11')
        ,('1009','10','09')
        ,('1020','10','20')
        ,('1023','10','23')
        ,('1024','10','24')
        ,('1025','10','25')
        ,('1030','10','30')
        ,('1032','10','32')
        ,('1652','16','52')
        ,('2130','21','30')
        ,('2358','23','58')
        ,('2402','24','02')
        ,('2405','24','05')
        ,('2427','24','27')
        ,('2442','24','42')
        ,('2548','25','48')
        ,('2620','26','20')
        ,('2622','26','22')
        ,('2648','26','48')
        ,('3005','30','05')
        ,('3023','30','23')
        ,('3052','30','52')
        ,('3104','31','04')
        ,('3113','31','13')
        ,('3130','31','30')
        ,('3131','31','31')
        ,('3147','31','47')
        ,('3201','32','01')
        ,('4100','41','00')
        ,('4103','41','03')
        ,('4110','41','10')
        ,('4111','41','11')
        ,('4112','41','12')
        ,('4113','41','13')
        ,('4115','41','15')
        ,('4117','41','17')
        ,('4118','41','18')
        ,('4120','41','20')
        ,('4121','41','21')
        ,('4125','41','25')
        ,('4127','41','27')
        ,('4141','41','41')
        ,('4146','41','46')
        ,('4147','41','47')
        ,('4148','41','48')
        ,('4149','41','49')
        ,('4151','41','51')
        ,('4152','41','52')
        ,('4154','41','54')
        ,('4157','41','57')
        ,('4158','41','58')
        ,('4161','41','61')
        ,('4162','41','62')
        ,('4163','41','63')
        ,('4175','41','75')
        ,('4176','41','76')
        ,('4210','42','10')
        ,('4211','42','11')
        ,('4212','42','12')
        ,('4215','42','15')
        ,('4217','42','17')
        ,('4221','42','21')
        ,('4232','42','32')
        ,('4248','42','48')
        ,('4251','42','51')
        ,('4258','42','58')
        ,('4262','42','62')
        ,('4300','43','00')
        ,('4310','43','10')
        ,('4311','43','11')
        ,('4312','43','12')
        ,('4313','43','13')
        ,('4314','43','14')
        ,('4315','43','15')
        ,('4316','43','16')
        ,('4317','43','17')
        ,('4319','43','19')
        ,('4320','43','20')
        ,('4321','43','21')
        ,('4323','43','23')
        ,('4325','43','25')
        ,('4327','43','27')
        ,('4328','43','28')
        ,('4329','43','29')
        ,('4331','43','31')
        ,('4332','43','32')
        ,('4341','43','41')
        ,('4344','43','44')
        ,('4347','43','47')
        ,('4348','43','48')
        ,('4349','43','49')
        ,('4352','43','52')
        ,('4355','43','55')
        ,('4356','43','56')
        ,('4358','43','58')
        ,('4359','43','59')
        ,('4360','43','60')
        ,('4363','43','63')
        ,('4376','43','76')
        ,('4377','43','77')
        ,('5100','51','00')
        ,('5171','51','71')
        ,('5300','53','00')
        ,('5400','54','00')
        ,('5417','54','17')
        ,('5427','54','27')
        ,('6000','60','00')
        ,('6100','61','00')
        ,('6118','61','18')
        ,('6156','61','56')
        ,('6164','61','64')
        ,('6165','61','65')
        ,('6168','61','68')
        ,('6169','61','69')
        ,('6170','61','70')
        ,('6171','61','71')
        ,('6173','61','73')
        ,('6200','62','00')
        ,('6232','62','32')
        ,('6300','63','00')
        ,('6365','63','65')
        ,('6418','64','18')
        ,('6464','64','64')
        ,('6465','64','65')
        ,('6470','64','70')
        ,('6471','64','71')
        ,('6478','64','78')
        ,('6500','65','00')
        ,('6527','65','27')
        ,('6532','65','32')
        ,('6561','65','61')
        ,('8000','80','00')
        ,('9700','97','00')
        ,('2261','22','61')
        ,('1408','14','08')
        ,('2546','25','46')
        ,('2116','21','16')
        ,('2142','21','42')
        ,('2551','25','51')
        ,('3214','32','14')
        ,('3114','31','14')
        ,('6400','64','00')
        ,('4166','41','66')
        ,('2429','24','29')
        ,('1720','17','20')
        ,('2310','23','10')
        ,('6510','65','10')
        ,('0409','04','09')
        ,('6117','61','17')
        ,('2419','24','19')
        ,('1452','14','52')
        ,('6070','60','70')
        ,('2128','21','28')
        ,('2322','23','22')
        ,('0620','06','20')
        ,('0340','03','40')
        ,('6466','64','66')
        ,('0406','04','06')
        ,('4220','42','20')
        ,('2164','21','64')
        ,('5410','54','10')
        ,('6477','64','77')
        ,('2078','20','78')
        ,('6417','64','17')
        ,('4114','41','14')
        ,('5672','56','72')
        ,('6517','65','17')
        ,('6411','64','11')
        ,('6161','61','61')
        ,('5571','55','71')
        ,('2625','26','25')
        ,('2544','25','44')
        ,('1341','13','41')
        ,('5500','55','00')
        ,('2658','26','58')
        ,('5415','54','15')
        ,('2167','21','67')
        ,('6177','61','77')
        ,('2600','26','00')
        ,('6554','65','54')
        ,('6262','62','62')
        ,('4138','41','38')
        ,('2717','27','17')
        ,('4306','43','06')
        ,('2133','21','33')
        ,('5675','56','75')
        ,('2646','26','46')
        ,('2201','22','01')
        ,('2345','23','45')
        ,('6227','62','27')
        ,('6468','64','68')
        ,('6425','64','25')
        ,('2623','26','23')
        ,('2002','20','02')
        ,('2380','23','80')
        ,('5461','54','61')
        ,('5627','56','27')
        ,('03','03','03')
        ,('6576','65','76')
        ,('6210','62','10')
        ,('2231','22','31')
        ,('1106','11','06')
        ,('4322','43','22')
        ,('5317','53','17')
        ,('2277','22','77')
        ,('2458','24','58')
        ,('6217','62','17')
        ,('2118','21','18')
        ,('2062','20','62')
        ,('26','26','26')
        ,('1444','14','44')
        ,('0465','04','65')
        ,('2621','26','21')
        ,('2178','21','78')
        ,('2219','22','19')
        ,('2250','22','50')
        ,('2030','20','30')
        ,('2263','22','63')
        ,('1300','13','00')
        ,('6454','64','54')
        ,('4361','43','61')
        ,('1404','14','04')
        ,('6577','65','77')
        ,('2552','25','52')
        ,('1250','12','50')
        ,('2555','25','55')
        ,('1400','14','00')
        ,('0303','03','03')
        ,('2362','23','62')
        ,('12','12','12')
        ,('6178','61','78')
        ,('4144','41','44')
        ,('6562','65','62')
        ,('2001','20','01')
        ,('4330','43','30')
        ,('5611','56','11')
        ,('6516','65','16')
        ,('4105','41','05')
        ,('5600','56','00')
        ,('3301','33','01')
        ,('6633','66','33')
        ,('4305','43','05')
        ,('6565','65','65')
        ,('2243','22','43')
        ,('4362','43','62')
        ,('1103','11','03')
        ,('6276','62','76')
        ,('6473','64','73')
        ,('6665','66','65')
        ,('2558','25','58')
        ,('6116','61','16')
        ,('2009','20','09')
        ,('2058','20','58')
        ,('6146','61','46')
        ,('2347','23','47')
        ,('5617','56','17')
        ,('4000','40','00')
        ,('1449','14','49')
        ,('4200','42','00')
        ,('4143','41','43')
        ,('1251','12','51')
        ,('4205','42','05')
        ,('2064','20','64')
        ,('5311','53','11')
        ,('6446','64','46')
        ,('5661','56','61')
        ,('6441','64','41')
        ,('6433','64','33')
        ,('0310','03','10')
        ,('2222','22','22')
        ,('4346','43','46')
        ,('5570','55','70')
        ,('6469','64','69')
        ,('1104','11','04')
        ,('6167','61','67')
        ,('6427','64','27')
        ,('2911','29','11')
        ,('5411','54','11')
        ,('6114','61','14')
        ,('3178','31','78')
        ,('300','30','00')
        ,('6266','62','66')
        ,('6154','61','54')
        ,('6176','61','76')
        ,('2159','21','59')
        ,('5413','54','13')
        ,('2244','22','44')
        ,('6559','65','59')
        ,('2408','24','08')
        ,('4048','40','48')
        ,('0369','03','69');

    EXCEPTION
        WHEN duplicate_object THEN RAISE NOTICE 'Table constraints already exist';
    END;
END $$;
